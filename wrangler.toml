name = "catchess"
main = "workers/chess-api.js"
compatibility_date = "2024-01-01"

# D1 Database Configuration (Cloudflare's free SQL database)
# To set up D1 database, run these commands:
# 1. wrangler d1 create catchess-db
# 2. wrangler d1 execute catchess-db --file=./schema.sql
# Then update the database_id below with the returned ID
#
# For local development, D1 will automatically create a local SQLite database
[[d1_databases]]
binding = "DB"
database_name = "catchess-db"
database_id = "local"  # Replace with your D1 database ID after running: wrangler d1 create catchess-db

# Durable Objects for WebSocket support
[[durable_objects.bindings]]
name = "CHESS_ROOM"
class_name = "ChessRoom"
script_name = "catchess"

[[migrations]]
tag = "v1"
new_classes = ["ChessRoom"]

[site]
bucket = "./frontend/dist"

# Routes are only needed if deploying to a custom domain managed by Cloudflare
# For *.workers.dev deployment, routes are not required - the worker is accessible at:
# https://catchess.<your-account>.workers.dev
#
# To deploy to a custom domain:
# 1. Add your domain to Cloudflare (DNS must be proxied through Cloudflare)
# 2. Uncomment the routes below and replace "your-domain.com" with your actual domain
# 3. Deploy with: wrangler deploy
#
# [[routes]]
# pattern = "/api/*"
# zone_name = "your-domain.com"
#
# [[routes]]
# pattern = "/ws/*"
# zone_name = "your-domain.com"
